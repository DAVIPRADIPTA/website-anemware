{# templates/web/doctor/_layout.html #}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>{% block title %}Doctor{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

    <style>
        :root {
            --bg: #f3f4f6;
            --surface: #ffffff;
            --text: #111827;
            --muted: #6b7280;
            --border: #e5e7eb;

            /* doctor accent */
            --accent: #16a34a;
            /* green-600 */
            --accent2: #15803d;
            /* green-700 */

            /* sidebar */
            --sidebar: #0f172a;
            --sidebar2: #111827;
            --sidebarText: #e5e7eb;

            --shadow: 0 10px 25px rgba(0, 0, 0, .08);
            --radius: 16px;

            --sidebar-w: 280px;
            --sidebar-collapsed-w: 86px;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
        }

        .app {
            min-height: 100vh;
            display: grid;
            grid-template-columns: var(--sidebar-w) 1fr;
            transition: grid-template-columns .2s ease;
        }

        .app.collapsed {
            grid-template-columns: var(--sidebar-collapsed-w) 1fr;
        }

        /* Sidebar base (same as admin) */
        .sidebar {
            background: linear-gradient(180deg, var(--sidebar) 0%, var(--sidebar2) 100%);
            color: var(--sidebarText);
            padding: 16px;
            position: sticky;
            top: 0;
            height: 100vh;
            border-right: 1px solid rgba(255, 255, 255, .08);
            overflow: hidden;
        }

        .sidebar-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 6px 6px 12px;
            border-bottom: 1px solid rgba(255, 255, 255, .08);
            margin-bottom: 14px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 0;
        }

        .brand-badge {
            width: 40px;
            height: 40px;
            border-radius: 14px;
            background: rgba(255, 255, 255, .10);
            display: grid;
            place-items: center;
            font-weight: 900;
            letter-spacing: .5px;
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, .06);
            flex: 0 0 auto;
        }

        .brand-text {
            min-width: 0;
        }

        .brand-text h5 {
            margin: 0;
            font-weight: 900;
            font-size: 1.05rem;
            line-height: 1.1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .brand-text small {
            color: rgba(229, 231, 235, .72);
            display: block;
            margin-top: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .toggle-btn {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, .14);
            background: rgba(255, 255, 255, .06);
            color: var(--sidebarText);
            display: grid;
            place-items: center;
            cursor: pointer;
            transition: transform .15s ease, background .15s ease;
            flex: 0 0 auto;
        }

        .toggle-btn:hover {
            background: rgba(255, 255, 255, .10);
            transform: translateY(-1px);
        }

        .nav-section-title {
            color: rgba(229, 231, 235, .6);
            font-size: .75rem;
            text-transform: uppercase;
            letter-spacing: .12em;
            margin: 14px 10px 8px;
        }

        .side-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 12px;
            text-decoration: none;
            color: var(--sidebarText);
            background: transparent;
            border: 1px solid transparent;
            transition: all .15s ease;
            user-select: none;
            position: relative;
        }

        .side-link:hover {
            background: rgba(255, 255, 255, .06);
            border-color: rgba(255, 255, 255, .10);
            transform: translateY(-1px);
        }

        .side-link.active {
            background: rgba(255, 255, 255, .10);
            border-color: rgba(255, 255, 255, .20);
            box-shadow: inset 3px 0 0 var(--accent);
        }

        .side-link i {
            font-size: 1.15rem;
            width: 22px;
            text-align: center;
            opacity: .95;
            flex: 0 0 auto;
        }

        .side-link span {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
        }

        .side-link .lock {
            color: rgba(229, 231, 235, .7);
            flex: 0 0 auto;
        }

        .side-link.disabled {
            opacity: .45;
            pointer-events: none;
            transform: none !important;
        }

        .sidebar-footer {
            position: absolute;
            left: 16px;
            right: 16px;
            bottom: 14px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, .08);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .user-chip {
            min-width: 0;
        }

        .user-chip .hello {
            font-size: .8rem;
            color: rgba(229, 231, 235, .75);
        }

        .user-chip .name {
            font-weight: 800;
            font-size: .95rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 160px;
        }

        /* Collapsed */
        .app.collapsed .brand-text,
        .app.collapsed .nav-section-title,
        .app.collapsed .side-link span,
        .app.collapsed .user-chip,
        .app.collapsed .side-link .lock {
            display: none;
        }

        .app.collapsed .side-link {
            justify-content: center;
            padding: 12px;
        }

        .app.collapsed .sidebar-footer {
            justify-content: center;
        }

        /* Main */
        .main {
            padding: 22px 22px 40px;
        }

        .page-header {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            gap: 16px;
            margin-bottom: 18px;
        }

        .page-header h2 {
            margin: 0;
            font-weight: 950;
            letter-spacing: -0.02em;
        }

        .page-header p {
            margin: 6px 0 0;
            color: var(--muted);
            font-size: .95rem;
        }

        /* Common card */
        .panel-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        @media (max-width:575.98px) {
            .main {
                padding: 16px 14px 30px;
            }
        }
    </style>

    {% block head_extra %}{% endblock %}
</head>

<body>
    <div class="app" id="appShell">
        {% include "web/doctor/_sidebar.html" %}
        <main class="main">
            {% block content %}{% endblock %}
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function () {
            const shell = document.getElementById("appShell");
            const btn = document.getElementById("sidebarToggle");

            const saved = localStorage.getItem("doctorSidebarCollapsed");
            if (saved === "1") shell.classList.add("collapsed");

            if (btn) {
                btn.addEventListener("click", function () {
                    shell.classList.toggle("collapsed");
                    localStorage.setItem("doctorSidebarCollapsed", shell.classList.contains("collapsed") ? "1" : "0");
                });
            }
        })();
    </script>

    {% block scripts %}
    <script>
        console.log("chat script loaded");
    </script>
    {% endblock %}
</body>

</html>